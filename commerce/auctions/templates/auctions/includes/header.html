<ul id="dropdown-categories" class="dropdown-content">
  {%for cat in all_categories%}
    <li><a href="{%url 'category_listings' slug=cat.slug %}">{{ cat.name }}</a></li> 
    {%endfor%}
    <li class="divider"></li>
  <li><a href="{% url 'categories' %}">View All</a></li>
</ul>
<nav class="blue darken-3">
  <div class="nav-wrapper container">
    <a href="{% url 'index' %}" class="brand-logo">Auctions</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="{% url 'index' %}">Active Listings</a></li>
      
      <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown-categories">
              Categories<i class="material-icons right">arrow_drop_down</i>
          </a>
      </li>

      <li><a href="{% url 'watchlist' %}">Watchlist</a></li>

      {% if user.is_authenticated %}
        <li><a href="{% url 'new_auction' %}">Create Listing</a></li>
        <li><a href="{% url 'logout' %}">Log Out ({{ user.username }})</a></li>
      {% else %}
        <li><a href="{% url 'login' %}">Log In</a></li>
        <li><a href="{% url 'register' %}">Register</a></li>
      {% endif %}
    </ul>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.dropdown-trigger');
    var instances = M.Dropdown.init(elems, {
        coverTrigger: false,  
        constrainWidth: false , 
    });
  });
</script>